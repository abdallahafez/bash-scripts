iptables -A INPUT -p tcp --destination-port 8082 -j DROP
# block -A for adding

iptables -A INPUT -p tcp --dport 80 -j ACCEPT
# allow -A for adding 

iptables -A INPUT -p tcp --dport 8082 -j DROP
iptables -D INPUT -p tcp --dport 8082 -j DROP
# delete the rule -D for deleting 

iptables -D INPUT -p tcp --dport 80 -j ACCEPT


/usr/bin/java -cp .:./../lib TestHttpConnection http://127.0.0.1:8082/mpesa-configuration-server/rest/version
/usr/bin/java -cp .:./../lib TestHttpConnection http://127.0.0.1/mpesa-backoffice/


# Generated by iptables-save v1.4.21 on Tue Feb 13 08:34:47 2024
*filter
:INPUT ACCEPT [572564061:638467073299]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [518552552:532012035163]
COMMIT
# Completed on Tue Feb 13 08:34:47 2024






alarmsender.sh  config.sh  snmpalarmsender.sh  watchdogweball.sh  watchdogweb.sh


mv alarmsender.sh /root/watchdogbackup 
mv watchdogweball.sh /root/watchdogbackup 
mv watchdogweb.sh /root/watchdogbackup 
mv ../conf/wdweb.conf /root/watchdogbackup 

cp /root/watchdogbackup/alarmsender.sh .
cp /root/watchdogbackup/watchdogweball.sh .
cp /root/watchdogbackup/watchdogweb.sh .
cp /root/watchdogbackup/wdweb.conf ../conf/wdweb.conf




echo "****************" >> /root/watchdogbackup/out.log
echo "$0" >> /root/watchdogbackup/out.log
echo "."  >> /root/watchdogbackup/out.log


echo $TRAP_ID > $WDPATH/$TRAPIDFILE
echo "$TRAP_ID  $WDPATH/$TRAPIDFILE" >> /root/watchdogbackup/out.log
echo "$TRAP_ID" >> /root/watchdogbackup/out.log






